<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="admin">
 
 <select id="get_memberList" resultType="m">
  select 
  member_no as memberNo,
  member_name as memberName,
  member_id as memberId,
  member_pw as memberPw,
  member_phone as memberPhone,
  member_level as memberLevel,
  delivery_level as deliveryLevel
  from member
 </select>
 
 
 <select id="get_QnaList" resultType="aQna">
select 
    member_no as memberNo,
    member_name as memberName,
    qna_no as qnaNo,
    qna_ref_no as qnaRefNo,
    qna_level as qnaLevel,
    qna_title as qnaTitle,
    qna_content as qnaContent,
    write_date as writeDate,
    product_no as productRefNo,
    product_name as productName
from 
((select * from qna a left outer join (select member_no, member_name from member) b
using (member_no))c 
left outer join (select product_no, product_name from product) d on c.product_ref_no = d.product_no)
 </select>
 
 <select id="get_DealList" resultType="aDeal">
select 
    product_no as productNo,
    deal_no as dealNo,
    discount_rate as discountRate,
    discount_date as discountDate,
    discountend_date as discountendDate,
    product_name as productName
from homecook_deal a left outer join (select product_no, product_name from product)b using (product_no)
 </select> 
 
  <select id="get_RefundList" resultType="aRefund">
select
	product_no as productNo,
	return_policy_no as returnPolicyNo,
	return_shipping as returnShipping,
	return_length as retrunLength,
	policy_content as policyContent,
	product_name as productName
from return_policy a left outer join (select product_no, product_name from product)b using (product_no)
 </select> 
 
<select id="selectOneMemberInfo" parameterType = "_int" resultType="m">
select 
	MEMBER_NO as memberNo,
	MEMBER_NAME as memberName,
	MEMBER_ID as memberId,
	MEMBER_PW as memberPw,
	MEMBER_PHONE as memberPhone,
	MEMBER_LEVEL as memberLevel,
	DELIVERY_LEVEL as deliveryLevel
from member where member_no = #{memberNo}
</select>


<update id="updateOneMemberInfo" parameterType = "m">
update member 
SET 
	member_name = #{memberName},
	member_phone = #{memberPhone},
	member_Level = #{memberLevel},
	delivery_level = #{deliveryLevel}
WHERE member_no = #{memberNo}
</update>


</mapper>
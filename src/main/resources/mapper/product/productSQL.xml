<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="product">
<select id="selectProductList" parameterType="map" resultType="p">
SELECT product_no as productNo, member_no as memberNo, product_name as productName,product_detail as productDetail, manufacture_date as manufactureDate, stock, origin, manufacturer, manager_contact as managerContact, c_c_contact as ccContact, how_to_use as howToUse, precautions, expiration_date as expirationDate, capacity, price, limit ,category_No as categoryNo, product_img_no as productImgNo, fileName, filePath, Main_img as mainImg   
FROM(SELECT ROWNUM RNUM, P.* FROM(SELECT * FROM PRODUCT PRO JOIN PRODUCT_IMG USING (PRODUCT_NO) WHERE MEMBER_NO = #{memberNo} AND MAIN_IMG = 'Y' ORDER BY PRODUCT_NO DESC)P) 
WHERE RNUM between #{start} and #{end} 
 </select>
<select id="selectTotalCount" parameterType="m" resultType="_int">
select count(*) as cnt from product where member_no = #{memberNo}
</select>
		
<insert id="insertProduct" parameterType="p">
INSERT INTO PRODUCT VALUES (PRODUCT_SEQ.NEXTVAL,#{memberNo},#{productName},#{productDetail},#{manufactureDate},#{stock},#{origin},#{manufacturer},#{managerContact},'1372',#{howToUse},#{precautions},#{expirationDate},#{capacity},#{price},#{limit},#{categoryNo})
<selectKey resultType="_int" order="AFTER" keyProperty="productNo">select max(product_no) from product</selectKey>
</insert>		
</mapper>
 
 